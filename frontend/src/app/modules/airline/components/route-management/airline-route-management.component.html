<div class="route-management">
    <!-- Header -->
    <div class="header">
        <h1>Route Management</h1>
        <p>{{ routes.length }} routes in your network</p>
    </div>

    <!-- Actions Section -->
    <div class="actions-section">
        <button class="action-button primary" (click)="toggleRouteForm()" type="button">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
                </path>
            </svg>
            Add New Route
        </button>
    </div>

    <!-- Success Message -->
    <div class="status-message success" *ngIf="success && !loading">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span>{{ success }}</span>
    </div>

    <!-- Error Message -->
    <div class="status-message error" *ngIf="error && !loading">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span>{{ error }}</span>
    </div>

    <!-- Create Route Form -->
    <div class="form-card" *ngIf="showRouteForm">
        <div class="form-header">
            <h2>Create New Route</h2>
            <p>Define route between airports</p>
        </div>
        <form [formGroup]="routeForm" (ngSubmit)="onCreateRoute()">
            <div class="form-grid">
                <!-- Route Code -->
                <div class="form-group">
                    <label for="routeCode">Route Code</label>
                    <input id="routeCode" type="text" formControlName="routeCode" placeholder="e.g., AZ123, LH456"
                        (input)="onRouteCodeInput($event)" maxlength="6"
                        [class.error]="routeForm.get('routeCode')?.invalid && routeForm.get('routeCode')?.touched">
                    <small class="input-hint">Format: XX123 or XX1234 (airline code + numbers)</small>
                </div>

                <!-- Origin Airport -->
                <div class="form-group">
                    <label for="origin">Origin Airport</label>
                    <select id="origin" formControlName="origin"
                        [class.error]="routeForm.get('origin')?.invalid && routeForm.get('origin')?.touched">
                        <option value="">Select origin airport</option>
                        <option *ngFor="let airport of airports" [value]="airport._id">{{ airport.name }} ({{
                            airport.code }})</option>
                    </select>
                </div>

                <!-- Destination Airport -->
                <div class="form-group">
                    <label for="destination">Destination Airport</label>
                    <select id="destination" formControlName="destination"
                        [class.error]="routeForm.get('destination')?.invalid && routeForm.get('destination')?.touched">
                        <option value="">Select destination airport</option>
                        <option *ngFor="let airport of airports" [value]="airport._id">{{ airport.name }} ({{
                            airport.code }})</option>
                    </select>
                </div>

                <!-- Distance -->
                <div class="form-group">
                    <label for="distance">Distance (km)</label>
                    <input id="distance" type="number" formControlName="distance" placeholder="e.g., 480"
                        [class.error]="routeForm.get('distance')?.invalid && routeForm.get('distance')?.touched">
                </div>

                <!-- Estimated Duration -->
                <div class="form-group">
                    <label for="estimatedDuration">Duration (minutes)</label>
                    <input id="estimatedDuration" type="number" formControlName="estimatedDuration"
                        placeholder="e.g., 75" min="30"
                        [class.error]="routeForm.get('estimatedDuration')?.invalid && routeForm.get('estimatedDuration')?.touched">
                </div>

                <!-- Season Start Date -->
                <div class="form-group">
                    <label for="startDate">Season Start Date</label>
                    <input id="startDate" type="date" formControlName="startDate"
                        [class.error]="routeForm.get('startDate')?.invalid && routeForm.get('startDate')?.touched">
                </div>

                <!-- Season End Date -->
                <div class="form-group">
                    <label for="endDate">Season End Date</label>
                    <input id="endDate" type="date" formControlName="endDate"
                        [class.error]="routeForm.get('endDate')?.invalid && routeForm.get('endDate')?.touched">
                </div>
            </div>

            <!-- Operating Days Section -->
            <div class="form-section">
                <h3>Operating Days</h3>
                <div class="checkbox-grid">
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="monday">
                        <span>Monday</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="tuesday">
                        <span>Tuesday</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="wednesday">
                        <span>Wednesday</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="thursday">
                        <span>Thursday</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="friday">
                        <span>Friday</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="saturday">
                        <span>Saturday</span>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" formControlName="sunday">
                        <span>Sunday</span>
                    </label>
                </div>
            </div>

            <!-- Route Status -->
            <div class="form-section">
                <!-- Active Status -->
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" formControlName="isActive">
                        <span>Active Route</span>
                    </label>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-secondary" (click)="cancelRouteForm()">Cancel</button>
                <button type="submit" class="btn-primary" [disabled]="routeForm.invalid || loading">
                    <span *ngIf="loading">Creating...</span>
                    <span *ngIf="!loading">Create Route</span>
                </button>
            </div>
        </form>
    </div>

    <!-- Routes List -->
    <div class="routes-section" *ngIf="!isLoading">
        <!-- Loading -->
        <div class="loading-container" *ngIf="loading">
            <div class="loading-spinner"></div>
            <p>Loading routes...</p>
        </div>

        <!-- No Routes -->
        <div class="empty-state" *ngIf="!loading && routes.length === 0">
            <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 01.553-.894L9 2l6 3 5.447-2.724A1 1 0 0121 3.382v10.764a1 1 0 01-.553.894L15 18l-6-3z">
                </path>
            </svg>
            <h3>No routes found</h3>
            <p>Create your first route to start building your network</p>
            <button class="btn-primary" (click)="toggleRouteForm()">Create First Route</button>
        </div>

        <!-- Routes Grid -->
        <div class="routes-grid" *ngIf="!loading && routes.length > 0">
            <div class="route-card" *ngFor="let route of routes">
                <div class="route-header">
                    <div class="route-code">{{ route.routeCode }}</div>
                    <div class="route-status" [class]="route.isActive ? 'active' : 'inactive'">
                        {{ route.isActive ? 'Active' : 'Inactive' }}
                    </div>
                </div>

                <div class="route-info">
                    <div class="route-path">
                        <div class="airport">
                            <div class="airport-code">{{ route.origin?.code }}</div>
                            <div class="airport-name">{{ route.origin?.name }}</div>
                        </div>
                        <div class="route-arrow">â†’</div>
                        <div class="airport">
                            <div class="airport-code">{{ route.destination?.code }}</div>
                            <div class="airport-name">{{ route.destination?.name }}</div>
                        </div>
                    </div>

                    <div class="route-details">
                        <div class="detail-item">
                            <span class="label">Distance:</span>
                            <span class="value">{{ route.distance }} km</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Duration:</span>
                            <span class="value">{{ route.estimatedDuration }} min</span>
                        </div>
                    </div>
                </div>

                <div class="route-actions">
                    <button class="action-btn delete" (click)="deleteRoute(route._id)">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                            </path>
                        </svg>
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>