<div class="flight-management">
  <!-- Header -->
  <div class="header">
    <h1>Flight Management</h1>
    <p>{{ flights.length }} flights in your schedule</p>
  </div>

  <!-- Actions Section -->
  <div class="actions-section">
    <button class="action-button primary" (click)="toggleFlightForm()" type="button">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
      </svg>
      Add New Flight
    </button>
  </div>

  <!-- Success Message -->
  <div class="status-message success" *ngIf="success && !loading">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <span>{{ success }}</span>
  </div>

  <!-- Error Message -->
  <div class="status-message error" *ngIf="error && !loading">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <span>{{ error }}</span>
  </div>

  <!-- Create Flight Form -->
  <div class="form-card" *ngIf="showFlightForm">
    <div class="form-header">
      <h2>Create New Flight</h2>
      <p>Enter flight details and schedule</p>
    </div>
    <form [formGroup]="flightForm" (ngSubmit)="onCreateFlight()">
      <div class="form-grid">
        <!-- Flight Number -->
        <div class="form-field">
          <label class="form-label">Flight Number</label>
          <input type="text" class="form-input" formControlName="flightNumber" placeholder="e.g. AZ123"
            (input)="onFlightNumberInput($event)">
          <div class="form-error"
            *ngIf="flightForm.get('flightNumber')?.hasError('required') && flightForm.get('flightNumber')?.touched">
            Flight number is required
          </div>
          <div class="form-error"
            *ngIf="flightForm.get('flightNumber')?.hasError('pattern') && flightForm.get('flightNumber')?.touched">
            Format: 2 letters + 3-4 numbers (e.g. AZ123)
          </div>
        </div>

        <!-- Departure Airport -->
        <div class="form-field">
          <label class="form-label">Departure Airport</label>
          <select class="form-input" formControlName="departureAirport">
            <option value="">Select departure airport</option>
            <option *ngFor="let airport of airports" [value]="airport._id">
              {{ airport.name }} ({{ airport.code }})
            </option>
          </select>
        </div>

        <!-- Arrival Airport -->
        <div class="form-field">
          <label class="form-label">Arrival Airport</label>
          <select class="form-input" formControlName="arrivalAirport">
            <option value="">Select arrival airport</option>
            <option *ngFor="let airport of airports" [value]="airport._id">
              {{ airport.name }} ({{ airport.code }})
            </option>
          </select>
        </div>

        <!-- Departure Time -->
        <div class="form-field">
          <label class="form-label">Departure Time</label>
          <input type="datetime-local" class="form-input" formControlName="departureTime">
        </div>

        <!-- Arrival Time -->
        <div class="form-field">
          <label class="form-label">Arrival Time</label>
          <input type="datetime-local" class="form-input" formControlName="arrivalTime">
        </div>

        <!-- Aircraft -->
        <div class="form-field">
          <label class="form-label">Aircraft</label>
          <select class="form-input" formControlName="aircraft">
            <option value="">Select aircraft type</option>
            <option *ngFor="let aircraft of aircraftTypes" [value]="aircraft.model">
              {{ aircraft.model }} ({{ aircraft.capacity }} seats)
            </option>
          </select>
        </div>

        <!-- Economy Price -->
        <div class="form-field">
          <label class="form-label">Economy Price (€)</label>
          <input type="number" class="form-input" formControlName="economyPrice" min="0" placeholder="150">
        </div>

        <!-- Business Price -->
        <div class="form-field">
          <label class="form-label">Business Price (€)</label>
          <input type="number" class="form-input" formControlName="businessPrice" min="0" placeholder="500">
        </div>

        <!-- First Price -->
        <div class="form-field">
          <label class="form-label">First Class Price (€)</label>
          <input type="number" class="form-input" formControlName="firstPrice" min="0" placeholder="1200">
        </div>

        <!-- Gate -->
        <div class="form-field">
          <label class="form-label">Gate (optional)</label>
          <input type="text" class="form-input" formControlName="gate" placeholder="A12">
        </div>

        <!-- Terminal -->
        <div class="form-field">
          <label class="form-label">Terminal (optional)</label>
          <input type="text" class="form-input" formControlName="terminal" placeholder="T1">
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="toggleFlightForm()">Cancel</button>
        <button type="submit" class="btn-submit" [disabled]="flightForm.invalid || loading">
          <span class="spinner" *ngIf="loading"></span>
          <span *ngIf="!loading">Create Flight</span>
        </button>
      </div>
    </form>
  </div>

  <!-- Flights List -->
  <div class="flights-list" *ngIf="!loading">
    <div class="flight-card" *ngFor="let flight of flights; let i = index">
      <div class="flight-icon">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8">
          </path>
        </svg>
      </div>
      <div class="flight-info">
        <div class="flight-number">{{ flight.flightNumber }}</div>
        <div class="flight-route">{{ flight.departureAirport?.code }} → {{ flight.arrivalAirport?.code }}</div>
        <div class="flight-aircraft">{{ flight.aircraft?.model }}</div>
      </div>
      <div class="flight-time">
        <div class="departure-time">{{ flight.departureTime | date:'MMM d, HH:mm' }}</div>
        <div class="duration">{{ flight.duration }}min</div>
      </div>
      <div class="flight-price">
        <div class="price-label">From</div>
        <div class="price-value">€{{ flight.basePrice?.economy }}</div>
      </div>
      <div class="flight-status">
        <span class="status-badge" [ngClass]="flight.status">
          {{ getStatusText(flight.status) }}
        </span>
      </div>
      <div class="flight-actions">
        <button class="action-btn delete" (click)="deleteFlight(flight)" title="Delete flight">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
            </path>
          </svg>
        </button>
      </div>
    </div>

    <!-- No Results -->
    <div class="no-results" *ngIf="flights.length === 0">
      <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8">
        </path>
      </svg>
      <p>No flights scheduled yet</p>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading" *ngIf="loading">
    <div class="spinner-large"></div>
    <p>Loading flights...</p>
  </div>
</div>